<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Intersection Observer API</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: system-ui, sans-serif;
      background: #1a1a2e;
      color: white;
    }
    
    .spacer {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      opacity: 0.5;
    }
    
    .section {
      min-height: 50vh;
      padding: 3rem;
      margin: 2rem;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.05);
      
      /* TODO: ì´ˆê¸° ìƒíƒœ - íˆ¬ëª… + ì•„ë˜ì— ìœ„ì¹˜ */
      /* opacity: ??? */
      /* transform: ??? */
      /* transition: ??? */
    }
    
    /* TODO: í™”ë©´ì— ë“¤ì–´ì™”ì„ ë•Œ ìŠ¤íƒ€ì¼ */
    .section.visible {
      /* opacity: ??? */
      /* transform: ??? */
    }
    
    .lazy-image {
      width: 100%;
      max-width: 400px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
    }
    
    .lazy-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.5s;
    }
    
    .lazy-image img.loaded { opacity: 1; }
  </style>
</head>
<body>
  <div class="spacer">â¬‡ï¸ ìŠ¤í¬ë¡¤í•´ì„œ ì‹¤í—˜í•´ë³´ì„¸ìš”</div>
  
  <section class="section">
    <h2>1. Fade In ì• ë‹ˆë©”ì´ì…˜</h2>
    <p>í™”ë©´ì— ë“¤ì–´ì˜¤ë©´ ìë™ìœ¼ë¡œ í˜ì´ë“œì¸ë©ë‹ˆë‹¤.</p>
  </section>
  
  <section class="section">
    <h2>2. Lazy Loading ì´ë¯¸ì§€</h2>
    <p>ì´ë¯¸ì§€ëŠ” í™”ë©´ì— ê·¼ì ‘í•´ì•¼ ë¡œë”©ì„ ì‹œì‘í•©ë‹ˆë‹¤.</p>
    <div class="lazy-image">
      <img data-src="https://picsum.photos/seed/1/400/200" alt="Lazy loaded">
    </div>
  </section>
  
  <section class="section">
    <h2>3. Threshold ì˜µì…˜</h2>
    <p>threshold: 0.5 â†’ ìš”ì†Œì˜ 50%ê°€ ë³´ì¼ ë•Œ íŠ¸ë¦¬ê±°</p>
    <div class="lazy-image">
      <img data-src="https://picsum.photos/seed/2/400/200" alt="Lazy loaded">
    </div>
  </section>
  
  <div class="spacer">ğŸ‰ ë!</div>

  <script>
    /**
     * Intersection Observer ì˜µì…˜:
     * - root: ê´€ì°° ê¸°ì¤€ì´ ë˜ëŠ” ìš”ì†Œ (ê¸°ë³¸ê°’: viewport)
     * - rootMargin: root ì˜ì—­ í™•ì¥/ì¶•ì†Œ (ì˜ˆ: "100px")
     * - threshold: íŠ¸ë¦¬ê±° ì§€ì  (0~1, ë˜ëŠ” ë°°ì—´)
     */
    
    // ===========================================
    // 1. ì„¹ì…˜ Fade In ì• ë‹ˆë©”ì´ì…˜
    // ===========================================
    // TODO: IntersectionObserver ìƒì„±
    // - ì„¹ì…˜ì´ 20% ë³´ì´ë©´ 'visible' í´ë˜ìŠ¤ ì¶”ê°€
    
    const sectionObserver = new IntersectionObserver(
      (entries) => {
        // êµ¬í˜„í•˜ì„¸ìš”
        // íŒíŠ¸: entry.isIntersecting, entry.target.classList
      },
      {
        threshold: 0.2
      }
    );
    
    // TODO: ëª¨ë“  .section ìš”ì†Œ ê´€ì°° ì‹œì‘
    // document.querySelectorAll('.section').forEach(...)
    
    
    // ===========================================
    // 2. ì´ë¯¸ì§€ Lazy Loading  
    // ===========================================
    // TODO: IntersectionObserverë¡œ ì´ë¯¸ì§€ ì§€ì—° ë¡œë”© êµ¬í˜„
    // - data-srcë¥¼ srcë¡œ ì˜®ê²¨ì„œ ì‹¤ì œ ë¡œë”©
    // - rootMarginìœ¼ë¡œ ë¯¸ë¦¬ ë¡œë”© ì‹œì‘
    
    const imageObserver = new IntersectionObserver(
      (entries) => {
        // êµ¬í˜„í•˜ì„¸ìš”
        // íŒíŠ¸: img.dataset.src, img.src
        // íŒíŠ¸: ë¡œë”© ì™„ë£Œ í›„ unobserve
      },
      {
        rootMargin: '100px'
      }
    );
    
    // TODO: ëª¨ë“  [data-src] ì´ë¯¸ì§€ ê´€ì°° ì‹œì‘
    
    
    console.log(`
    ğŸ“¦ Intersection Observer ì¥ì :
    - scroll ì´ë²¤íŠ¸ë³´ë‹¤ ì„±ëŠ¥ì´ ì¢‹ìŒ (ë¹„ë™ê¸°)
    - Reflow ë°œìƒ ì•ˆ í•¨
    - ë¸Œë¼ìš°ì €ê°€ ìµœì í™”
    `);
  </script>
</body>
</html>
